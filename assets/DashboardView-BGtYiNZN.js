import{d as H,u as J,r as c,k as K,l as x,m as P,n as g,c as o,o as i,a as e,b as n,t as v,p as h,F as I,q as M,s as y,f as D,w as A,e as W,v as S,_ as Q}from"./index-5rh9JTgC.js";const R={class:"dashboard"},X={class:"sidebar-header"},Y={key:0,class:"logo-text"},Z={class:"sidebar-nav"},ss={class:"nav-section"},es={key:0,class:"nav-title"},ts={key:0,class:"nav-text"},ls={class:"nav-section"},os={key:0,class:"nav-title"},is=["onClick"],ns=["src","alt"],as={key:0,class:"nav-text"},rs={class:"sidebar-footer"},ds={class:"user-profile"},us=["src","alt"],vs={key:0,class:"user-details"},cs={key:0,class:"nav-text"},ms={class:"main-content"},ps={class:"content-header"},fs={class:"header-left"},hs={class:"header-info"},bs={class:"welcome-text"},ws={class:"content-area"},ks={class:"stats-cards"},gs={class:"stat-card"},ys={class:"stat-info"},_s={class:"stat-card"},Cs={class:"stat-info"},$s={class:"stat-card"},xs={class:"stat-info"},Ws={class:"wishes-section"},Ss={class:"section-header"},Es={class:"view-controls"},Is={class:"wish-image-container"},Ms=["src","alt"],Ds={class:"wish-actions"},Vs=["onClick"],Us={class:"wish-content"},Ts={class:"wish-title"},As={class:"wish-description"},Ls={class:"wish-tags"},Ns={class:"wish-footer"},zs=["href"],Bs={key:0,class:"empty-state"},qs={key:0},Fs={key:1},Os={class:"modal"},js={class:"modal-header"},Gs={class:"modal-body"},Hs={class:"form-group"},Js={class:"form-group"},Ks={class:"form-group"},Ps={class:"form-group"},Qs={class:"modal-footer"},Rs=["disabled"],Xs={class:"modal confirm-modal"},Ys={class:"modal-header"},Zs={class:"modal-body"},se={class:"modal-footer"},ee=H({__name:"DashboardView",setup(te){const r=J(),d=c(!1),p=c(!1),_=c(!1),u=c("my-wishes"),b=c("grid"),f=c(!1),w=c(!1),k=c(null),m=c([]),C=c([]),a=c({title:"",description:"",link:"",image:""}),E=()=>{_.value=window.innerWidth<768};K(async()=>{E(),window.addEventListener("resize",E);try{m.value=await x.getWishes();const l=await x.getUsers();C.value=l.filter(s=>s.id!==r.user?.id)}catch(l){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:",l)}}),P(()=>{window.removeEventListener("resize",E)});const V=g(()=>{if(u.value==="my-wishes")return m.value.filter(l=>l.userId===r.user?.id);if(u.value.startsWith("user-")){const l=u.value.split("-")[1];return m.value.filter(s=>s.userId===l)}return m.value}),L=g(()=>m.value.filter(l=>l.userId===r.user?.id).length);g(()=>m.value.filter(l=>l.userId===r.user?.id).reduce((l,s)=>l+(s.likes||0),0));const N=g(()=>m.value.filter(l=>l.userId!==r.user?.id).length),z=g(()=>{if(u.value==="my-wishes")return`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${r.user?.username}!`;{const l=C.value.find(s=>`user-${s.id}`===u.value);return l?`–í–∏—à–ª–∏—Å—Ç ${l.username}`:"–í–∏—à–ª–∏—Å—Ç"}}),B=g(()=>u.value==="my-wishes"?"–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –∂–µ–ª–∞–Ω–∏—è–º–∏":"–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∂–µ–ª–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"),q=()=>{_.value?p.value=!p.value:d.value=!d.value},F=()=>{p.value=!p.value},U=()=>{p.value=!1},T=l=>{u.value=l,_.value&&U()},O=l=>{k.value=l,w.value=!0},j=async()=>{if(k.value)try{await x.deleteWish(k.value.id),m.value=m.value.filter(l=>l.id!==k.value.id),w.value=!1,k.value=null,window.dispatchEvent(new CustomEvent("show-notification",{detail:{message:"–ñ–µ–ª–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ",type:"success",duration:3e3}}))}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∂–µ–ª–∞–Ω–∏—è:",l),window.dispatchEvent(new CustomEvent("show-notification",{detail:{message:l.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∂–µ–ª–∞–Ω–∏—è",type:"error",duration:4e3}}))}},G=async()=>{if(a.value.title.trim())try{const l={title:a.value.title,description:a.value.description,link:a.value.link,image:a.value.image,userId:r.user?.id||"",createdAt:new Date().toISOString()},s=await x.createWish(l);m.value.unshift(s),f.value=!1,window.dispatchEvent(new CustomEvent("show-notification",{detail:{message:"–ñ–µ–ª–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!",type:"success",duration:3e3}})),a.value={title:"",description:"",link:"",image:""}}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∂–µ–ª–∞–Ω–∏—è:",l),window.dispatchEvent(new CustomEvent("show-notification",{detail:{message:l.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∂–µ–ª–∞–Ω–∏—è",type:"error",duration:4e3}}))}};return(l,s)=>(i(),o("div",R,[e("aside",{class:h(["sidebar",{"sidebar-collapsed":d.value,"sidebar-mobile-open":p.value}])},[e("div",X,[e("div",{class:"logo",onClick:s[0]||(s[0]=t=>d.value=!d.value)},[s[17]||(s[17]=e("div",{class:"logo-icon"},"‚ú®",-1)),d.value?n("",!0):(i(),o("span",Y,"WishLister"))]),e("button",{class:"toggle-btn",onClick:q},v(d.value?"‚Üí":"‚Üê"),1)]),e("nav",Z,[e("div",ss,[d.value?n("",!0):(i(),o("h3",es,"–ú–æ–π –≤–∏—à–ª–∏—Å—Ç")),e("button",{class:h(["nav-item",{active:u.value==="my-wishes"}]),onClick:s[1]||(s[1]=t=>T("my-wishes"))},[s[18]||(s[18]=e("span",{class:"nav-icon"},"üì¶",-1)),d.value?n("",!0):(i(),o("span",ts,"–ú–æ–∏ –∂–µ–ª–∞–Ω–∏—è"))],2)]),e("div",ls,[d.value?n("",!0):(i(),o("h3",os,"–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏")),(i(!0),o(I,null,M(C.value,t=>(i(),o("button",{key:t.id,class:h(["nav-item",{active:u.value===`user-${t.id}`}]),onClick:$=>T(`user-${t.id}`)},[e("img",{src:t.avatar,alt:t.username,class:"user-avatar-small"},null,8,ns),d.value?n("",!0):(i(),o("span",as,v(t.username),1))],10,is))),128))])]),e("div",rs,[e("div",ds,[e("img",{src:y(r).user?.avatar,alt:y(r).user?.username,class:"user-avatar"},null,8,us),d.value?n("",!0):(i(),o("div",vs,[e("strong",null,v(y(r).user?.username),1),s[19]||(s[19]=e("span",null,"–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å",-1))]))]),e("button",{class:"nav-item logout-btn",onClick:s[2]||(s[2]=(...t)=>y(r).logout&&y(r).logout(...t))},[s[20]||(s[20]=e("span",{class:"nav-icon"},"üö™",-1)),d.value?n("",!0):(i(),o("span",cs,"–í—ã–π—Ç–∏"))])])],2),_.value&&p.value?(i(),o("div",{key:0,class:"sidebar-overlay",onClick:U})):n("",!0),e("main",ms,[e("header",ps,[e("div",fs,[_.value?(i(),o("button",{key:0,class:"menu-toggle",onClick:F},[...s[21]||(s[21]=[e("span",{class:"menu-icon"},"‚ò∞",-1)])])):n("",!0),e("div",hs,[e("h1",null,v(z.value),1),e("p",bs,v(B.value),1)])]),u.value==="my-wishes"?(i(),o("button",{key:0,class:"add-wish-btn",onClick:s[3]||(s[3]=t=>f.value=!0)},[...s[22]||(s[22]=[e("span",{class:"btn-icon"},"‚ûï",-1),D(" –î–æ–±–∞–≤–∏—Ç—å –∂–µ–ª–∞–Ω–∏–µ ",-1)])])):n("",!0)]),e("div",ws,[e("div",ks,[e("div",gs,[s[24]||(s[24]=e("div",{class:"stat-icon"},"üìù",-1)),e("div",ys,[e("h3",null,v(L.value),1),s[23]||(s[23]=e("p",null,"–ú–æ–∏ –∂–µ–ª–∞–Ω–∏—è",-1))])]),e("div",_s,[s[26]||(s[26]=e("div",{class:"stat-icon"},"üëÄ",-1)),e("div",Cs,[e("h3",null,v(N.value),1),s[25]||(s[25]=e("p",null,"–ß—É–∂–∏–µ –∂–µ–ª–∞–Ω–∏—è",-1))])]),e("div",$s,[s[28]||(s[28]=e("div",{class:"stat-icon"},"üë•",-1)),e("div",xs,[e("h3",null,v(C.value.length),1),s[27]||(s[27]=e("p",null,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",-1))])])]),e("div",Ws,[e("div",Ss,[s[29]||(s[29]=e("h2",null,"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π",-1)),e("div",Es,[e("button",{class:h(["view-btn",{active:b.value==="grid"}]),onClick:s[4]||(s[4]=t=>b.value="grid")}," ‚óºÔ∏è –°–µ—Ç–∫–∞ ",2),e("button",{class:h(["view-btn",{active:b.value==="list"}]),onClick:s[5]||(s[5]=t=>b.value="list")}," üìã –°–ø–∏—Å–æ–∫ ",2)])]),e("div",{class:h(["wishes-container",b.value])},[(i(!0),o(I,null,M(V.value,t=>(i(),o("div",{key:t.id,class:h(["wish-card",b.value])},[e("div",Is,[e("img",{src:t.image,alt:t.title,class:"wish-image"},null,8,Ms),e("div",Ds,[t.userId===y(r).user?.id?(i(),o("button",{key:0,class:"delete-btn",onClick:$=>O(t),title:"–£–¥–∞–ª–∏—Ç—å –∂–µ–ª–∞–Ω–∏–µ"}," üóëÔ∏è ",8,Vs)):n("",!0)])]),e("div",Us,[e("h3",Ts,v(t.title),1),e("p",As,v(t.description),1),e("div",Ls,[(i(!0),o(I,null,M(t.tags,$=>(i(),o("span",{key:$,class:"tag"},v($),1))),128))]),e("div",Ns,[t.link?(i(),o("a",{key:0,href:t.link,target:"_blank",class:"wish-link"}," üîó –ü–µ—Ä–µ–π—Ç–∏ ",8,zs)):n("",!0)])])],2))),128)),V.value.length===0?(i(),o("div",Bs,[s[30]||(s[30]=e("div",{class:"empty-icon"},"üìù",-1)),s[31]||(s[31]=e("h3",null,"–ü–æ–∫–∞ –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏–π",-1)),u.value==="my-wishes"?(i(),o("p",qs,"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–µ –∂–µ–ª–∞–Ω–∏–µ, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É")):(i(),o("p",Fs,"–£ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏–π")),u.value==="my-wishes"?(i(),o("button",{key:2,class:"empty-btn",onClick:s[6]||(s[6]=t=>f.value=!0)}," –î–æ–±–∞–≤–∏—Ç—å –∂–µ–ª–∞–Ω–∏–µ ")):n("",!0)])):n("",!0)],2)])])]),f.value?(i(),o("div",{key:1,class:"modal-overlay",onClick:s[13]||(s[13]=A(t=>f.value=!1,["self"]))},[e("div",Os,[e("div",js,[s[32]||(s[32]=e("h2",null,"–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –∂–µ–ª–∞–Ω–∏–µ",-1)),e("button",{class:"modal-close",onClick:s[7]||(s[7]=t=>f.value=!1)},"√ó")]),e("div",Gs,[e("div",Hs,[s[33]||(s[33]=e("label",null,"–ù–∞–∑–≤–∞–Ω–∏–µ –∂–µ–ª–∞–Ω–∏—è *",-1)),W(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>a.value.title=t),type:"text",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä, –∫—Ä—É–∂–∫–∞ —ç—ç—ç",required:""},null,512),[[S,a.value.title]])]),e("div",Js,[s[34]||(s[34]=e("label",null,"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),W(e("textarea",{"onUpdate:modelValue":s[9]||(s[9]=t=>a.value.description=t),placeholder:"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤–∞—à–µ–º –∂–µ–ª–∞–Ω–∏–∏...",rows:"3"},null,512),[[S,a.value.description]])]),e("div",Ks,[s[35]||(s[35]=e("label",null,"–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),W(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>a.value.link=t),type:"url",placeholder:"https://example.com"},null,512),[[S,a.value.link]])]),e("div",Ps,[s[36]||(s[36]=e("label",null,"–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),W(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>a.value.image=t),type:"url",placeholder:"https://example.com"},null,512),[[S,a.value.image]])])]),e("div",Qs,[e("button",{class:"btn-secondary",onClick:s[12]||(s[12]=t=>f.value=!1)},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"btn-primary",onClick:G,disabled:!a.value.title.trim()}," –î–æ–±–∞–≤–∏—Ç—å ",8,Rs)])])])):n("",!0),w.value?(i(),o("div",{key:2,class:"modal-overlay",onClick:s[16]||(s[16]=A(t=>w.value=!1,["self"]))},[e("div",Xs,[e("div",Ys,[s[37]||(s[37]=e("h2",null,"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è",-1)),e("button",{class:"modal-close",onClick:s[14]||(s[14]=t=>w.value=!1)},"√ó")]),e("div",Zs,[e("p",null,[s[38]||(s[38]=D('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∂–µ–ª–∞–Ω–∏–µ "',-1)),e("strong",null,v(k.value?.title),1),s[39]||(s[39]=D('"?',-1))]),s[40]||(s[40]=e("p",{class:"warning-text"},"–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!",-1))]),e("div",se,[e("button",{class:"btn-secondary",onClick:s[15]||(s[15]=t=>w.value=!1)},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"btn-danger",onClick:j},"–£–¥–∞–ª–∏—Ç—å")])])])):n("",!0)]))}}),oe=Q(ee,[["__scopeId","data-v-144ba926"]]);export{oe as default};
